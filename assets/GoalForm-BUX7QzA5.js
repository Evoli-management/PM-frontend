import{r as c,j as e,F as S,a as C,b as I,c as F,d as A}from"./index-BHn-cp93.js";const T=({onClose:u,onGoalCreated:y,keyAreas:v=[],goal:s,isEditing:d=!1})=>{var p;const[a,j]=c.useState({title:(s==null?void 0:s.title)||"",description:(s==null?void 0:s.description)||"",startDate:s!=null&&s.startDate?new Date(s.startDate).toISOString().split("T")[0]:"",dueDate:s!=null&&s.dueDate?new Date(s.dueDate).toISOString().split("T")[0]:"",keyAreaId:(s==null?void 0:s.keyAreaId)||"",status:(s==null?void 0:s.status)||"active",visibility:(s==null?void 0:s.visibility)||"public"}),[i,b]=c.useState(((p=s==null?void 0:s.milestones)==null?void 0:p.length)>0?s.milestones.map(t=>({id:t.id,title:t.title,weight:t.weight||1,dueDate:t.dueDate||""})):[{title:"",weight:1,dueDate:""}]),[h,g]=c.useState(!1),[n,x]=c.useState({}),o=(t,r)=>{j(l=>({...l,[t]:r})),n[t]&&x(l=>({...l,[t]:null}))},w=()=>{i.length<10&&b([...i,{title:"",weight:1,dueDate:""}])},N=t=>{i.length>1&&b(i.filter((r,l)=>l!==t))},m=(t,r,l)=>{const f=[...i];f[t][r]=l,b(f)},D=()=>{const t={};if(a.title.trim()?a.title.length<3&&(t.title="Title must be at least 3 characters"):t.title="Title is required",!a.dueDate)t.dueDate="Due date is required";else{const r=new Date(a.dueDate),l=new Date;l.setHours(0,0,0,0),r<=l&&!d&&(t.dueDate="Due date must be in the future")}return x(t),Object.keys(t).length===0},k=async()=>{if(!D())return;g(!0);const t={title:a.title.trim(),description:a.description.trim()||null,startDate:a.startDate||null,dueDate:a.dueDate,keyAreaId:a.keyAreaId||null,visibility:a.visibility,milestones:i.filter(r=>r.title.trim()).map(r=>({...r.id&&{id:r.id},title:r.title.trim(),weight:parseFloat(r.weight)||1,dueDate:r.dueDate||null}))};try{await y(t),u()}catch(r){x({general:r.message||"Failed to save goal. Please try again."})}finally{g(!1)}};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 animate-fadeIn",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:[e.jsx("style",{children:`
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes slideUp {
                    from { 
                        opacity: 0;
                        transform: translateY(20px);
                    }
                    to { 
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                .animate-fadeIn {
                    animation: fadeIn 0.2s ease-out;
                }
                .animate-slideUp {
                    animation: slideUp 0.3s ease-out;
                }
                
                /* Custom scrollbar for milestones */
                .milestone-scroll::-webkit-scrollbar {
                    width: 6px;
                }
                .milestone-scroll::-webkit-scrollbar-track {
                    background: #f1f5f9;
                    border-radius: 3px;
                }
                .milestone-scroll::-webkit-scrollbar-thumb {
                    background: #cbd5e1;
                    border-radius: 3px;
                }
                .milestone-scroll::-webkit-scrollbar-thumb:hover {
                    background: #94a3b8;
                }
            `}),e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-6xl shadow-2xl flex flex-col animate-slideUp",style:{maxHeight:"90vh",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 flex-shrink-0 bg-gradient-to-r from-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg shadow-sm",children:e.jsx(S,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:d?"Edit Goal":"Create New Goal"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:d?"Update your goal details":"Set your target and break it down into milestones"})]})]}),e.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all duration-200",children:e.jsx(C,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsxs("div",{className:"h-full flex",children:[e.jsxs("div",{className:"flex-1 px-6 py-6 overflow-y-auto",children:[n.general&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 rounded-r text-red-700 text-sm animate-slideUp",children:[e.jsx("strong",{className:"font-medium",children:"Error:"})," ",n.general]}),e.jsxs("div",{className:"space-y-5 max-w-2xl",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Goal Title ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),e.jsx("input",{type:"text",value:a.title,onChange:t=>o("title",t.target.value),className:`w-full px-4 py-2.5 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${n.title?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"}`,placeholder:"e.g., Launch my SaaS product"}),n.title&&e.jsx("p",{className:"text-red-600 text-xs mt-1.5 animate-slideUp",children:n.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:t=>o("description",t.target.value),rows:"4",className:"w-full px-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none hover:border-gray-400 transition-all duration-200",placeholder:"Describe what you want to achieve and why it matters..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:a.startDate,onChange:t=>o("startDate",t.target.value),className:"w-full px-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent hover:border-gray-400 transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Due Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:a.dueDate,onChange:t=>o("dueDate",t.target.value),className:`w-full px-4 py-2.5 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${n.dueDate?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"}`,min:new Date().toISOString().split("T")[0]}),n.dueDate&&e.jsx("p",{className:"text-red-600 text-xs mt-1.5 animate-slideUp",children:n.dueDate})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Key Area"}),e.jsxs("select",{value:a.keyAreaId,onChange:t=>o("keyAreaId",t.target.value),className:"w-full px-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent hover:border-gray-400 transition-all duration-200 bg-white",children:[e.jsx("option",{value:"",children:"None"}),v.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:a.status,onChange:t=>o("status",t.target.value),className:"w-full px-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent hover:border-gray-400 transition-all duration-200 bg-white",disabled:!d,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Visibility"}),e.jsxs("select",{value:a.visibility,onChange:t=>o("visibility",t.target.value),className:"w-full px-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent hover:border-gray-400 transition-all duration-200 bg-white",children:[e.jsx("option",{value:"public",children:"Public"}),e.jsx("option",{value:"private",children:"Private"})]})]})]})]})]}),e.jsxs("div",{className:"col-span-5 border-l border-gray-200 flex flex-col",style:{height:"calc(85vh - 180px)"},children:[e.jsx("div",{className:"px-6 py-6 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Milestones"}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:[i.length,"/10"]})]}),e.jsxs("button",{type:"button",onClick:w,disabled:i.length>=10,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(I,{className:"w-3 h-3"}),"Add"]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6",style:{minHeight:0},children:e.jsx("div",{className:"space-y-2.5",children:i.map((t,r)=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-3 border border-gray-200 hover:border-gray-300 transition-all duration-200 hover:shadow-sm",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-full flex items-center justify-center text-xs font-semibold flex-shrink-0 mt-0.5 shadow-sm",children:r+1}),e.jsx("input",{type:"text",value:t.title,onChange:l=>m(r,"title",l.target.value),placeholder:"Milestone title",className:"flex-1 px-2.5 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white hover:border-gray-400 transition-all duration-200"}),e.jsx("button",{type:"button",onClick:()=>N(r),disabled:i.length===1,className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg disabled:opacity-30 disabled:cursor-not-allowed transition-all duration-200 hover:shadow-sm",children:e.jsx(F,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pl-7",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Weight"}),e.jsx("input",{type:"number",value:t.weight,onChange:l=>m(r,"weight",parseFloat(l.target.value)),className:"w-full px-2.5 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white hover:border-gray-400 transition-all duration-200",min:"0.1",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:t.dueDate,onChange:l=>m(r,"dueDate",l.target.value),className:"w-full px-2.5 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white hover:border-gray-400 transition-all duration-200"})]})]})]},r))})})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 flex-shrink-0 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:u,className:"px-5 py-2.5 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 shadow-sm hover:shadow",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:k,disabled:h,className:"flex items-center gap-2 px-5 py-2.5 text-sm font-semibold bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(A,{className:"w-4 h-4"}),h?"Saving...":d?"Update Goal":"Save Goal"]})]})]})]})};export{T as default};
