import{e as i}from"./index-C2xx4Upi.js";const o=e=>({id:e.id,title:e.name,color:e.color||"#3B82F6",description:e.description||"",position:e.sortOrder??0,is_default:!!e.isSystem,listNames:e.listNames||{},createdAt:e.createdAt,updatedAt:e.updatedAt,taskCount:e.taskCount??0}),u=e=>{var t;return{name:((t=e.title)==null?void 0:t.trim())||"",description:e.description??void 0,sortOrder:e.position??void 0}},l=e=>{const t={};return e.title!==void 0&&(t.name=e.title),e.description!==void 0&&(t.description=e.description),e.position!==void 0&&(t.sortOrder=e.position),e.listNames!==void 0&&(t.listNames=e.listNames),e.color!==void 0&&(t.color=e.color),t},m={async list({includeTaskCount:e=!0}={}){const t=await i.get("/key-areas",{params:{includeTaskCount:e}});return(Array.isArray(t.data)?t.data.map(o):[]).sort((n,s)=>{const a=String(n.title||"").trim().toLowerCase()==="ideas",d=String(s.title||"").trim().toLowerCase()==="ideas";if(a&&!d)return 1;if(!a&&d)return-1;const c=Number.isFinite(n.position)?n.position:0,p=Number.isFinite(s.position)?s.position:0;return c!==p?c-p:String(n.title||"").localeCompare(String(s.title||""))})},async get(e,{includeTaskCount:t=!1}={}){const r=await i.get(`/key-areas/${e}`,{params:{includeTaskCount:t}});return o(r.data)},async create(e){const t=await i.post("/key-areas",u(e),{headers:{"Content-Type":"application/json"}});return o(t.data)},async update(e,t){const r=l(t);Object.keys(r).forEach(s=>r[s]===void 0&&delete r[s]);const n=await i.put(`/key-areas/${e}`,r,{headers:{"Content-Type":"application/json"}});return o(n.data)},async reorder(e){try{const t=Array.isArray(e)?e.map(r=>({id:r.id,sortOrder:r.position})):[];return await i.patch("/key-areas/reorder",{items:t},{headers:{"Content-Type":"application/json"}}),!0}catch(t){if(Array.isArray(e))return await Promise.all(e.map(r=>i.put(`/key-areas/${r.id}`,{sortOrder:r.position},{headers:{"Content-Type":"application/json"}}))),!0;throw t}},async remove(e){return await i.delete(`/key-areas/${e}`),!0}};async function f(){return(await i.get("/key-areas")).data}export{m as default,f as getKeyAreas};
