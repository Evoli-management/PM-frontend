const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-ZUfUlKf1.js","assets/index-DT84ew3j.css"])))=>i.map(i=>d[i]);
import{r as s,e as ee,j as e,d as te,a as se,_ as ae}from"./index-ZUfUlKf1.js";let d=null;const le=async()=>{if(d)return d;const l=await ae(()=>import("./index-ZUfUlKf1.js").then(a=>a.k),__vite__mapDeps([0,1]));return d=(l==null?void 0:l.default)||l,d};function ie({open:l,onClose:a,onAdd:u,defaultList:U=1}){const V=s.useRef(null),x=s.useRef(null),m=s.useRef(null),f=s.useRef(null),h=s.useRef(null),[v,j]=s.useState(""),[N,y]=s.useState(""),[k,w]=s.useState("normal"),[S,D]=s.useState(""),[E,C]=s.useState(""),[b,p]=s.useState(""),[R,_]=s.useState(""),[K,P]=s.useState(""),[A,F]=s.useState(""),[O,I]=s.useState(""),[T,L]=s.useState(""),[J,H]=s.useState(!1),[i,g]=s.useState(!1),[M,G]=s.useState([]),[ne,z]=s.useState([]),[o,Q]=s.useState(""),[W,q]=s.useState(!0);if(s.useEffect(()=>{if(!l)return;const t=r=>{r.key==="Escape"&&(a==null||a())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[l,a]),s.useEffect(()=>{l&&(j(""),y(""),w("normal"),D(""),C(""),p(""),_(""),P(""),F(""),I(""),L(""),H(!1),g(!1),Q(""),q(!0),(async()=>{try{const t=await le(),[r,c]=await Promise.all([t.list({includeTaskCount:!1}),ee.list()]);G(r),z(c)}catch{G([]),z([])}})())},[l,U]),!l)return null;const n=t=>{try{t!=null&&t.current&&(t.current.focus(),typeof t.current.showPicker=="function"&&t.current.showPicker())}catch{}},X=async t=>{var c,B;(c=t==null?void 0:t.preventDefault)==null||c.call(t);const r=v.trim();if(r)try{g(!0),await(u==null?void 0:u({name:r,notes:A,start_date:E,end_date:b,dueDate:N,finish_date:T,duration:R,project:O,assignee:S,priority:k,goal:K,...o?{keyAreaId:o}:{},keyAreaName:o?((B=M.find($=>String($.id)===String(o)))==null?void 0:B.title)||"":"Don't Forget"})),a==null||a()}finally{g(!1)}},Y=t=>{C(t),(W||!b)&&p(t)},Z=t=>{p(t),q(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 grid place-items-center",onClick:a,children:e.jsxs("div",{ref:V,className:"relative bg-white border border-slate-300 rounded-xl shadow-2xl w-[95vw] max-w-4xl overflow-hidden",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"bg-white text-slate-900 border-b border-slate-200 py-3 px-4 text-center font-semibold",children:"Add Task"}),e.jsxs("form",{onSubmit:X,className:"p-4 md:p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"sr-only",htmlFor:"task-title",children:"Task name"}),e.jsx("input",{id:"task-title",autoFocus:!0,value:v,onChange:t=>j(t.target.value),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Task name",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"grid gap-3 content-start",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Description"}),e.jsx("input",{value:A,onChange:t=>F(t.target.value),className:"mt-1 h-9 rounded-md border border-slate-300 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Brief description"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Start date"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:"date",ref:x,value:E,onChange:t=>Y(t.target.value),className:"h-9 w-full rounded-md border border-slate-300 pr-10 pl-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 hide-native-date-icon"}),e.jsx("span",{role:"button",tabIndex:0,"aria-label":"Open date picker",onClick:()=>n(x),onKeyDown:t=>(t.key==="Enter"||t.key===" ")&&n(x),className:"absolute inset-y-0 right-2 grid place-items-center text-base cursor-pointer select-none",children:"ðŸ“…"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"End date"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:"date",ref:m,value:b,onChange:t=>Z(t.target.value),className:"h-9 w-full rounded-md border border-slate-300 pr-10 pl-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 hide-native-date-icon"}),e.jsx("span",{role:"button",tabIndex:0,"aria-label":"Open date picker",onClick:()=>n(m),onKeyDown:t=>(t.key==="Enter"||t.key===" ")&&n(m),className:"absolute inset-y-0 right-2 grid place-items-center text-base cursor-pointer select-none",children:"ðŸ“…"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Deadline"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:"date",ref:f,value:N,onChange:t=>y(t.target.value),className:"h-9 w-full rounded-md border border-slate-300 pr-10 pl-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 hide-native-date-icon"}),e.jsx("span",{role:"button",tabIndex:0,"aria-label":"Open date picker",onClick:()=>n(f),onKeyDown:t=>(t.key==="Enter"||t.key===" ")&&n(f),className:"absolute inset-y-0 right-2 grid place-items-center text-base cursor-pointer select-none",children:"ðŸ“…"})]}),e.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"No later than"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Date (finish)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:"date",ref:h,value:T,onChange:t=>L(t.target.value),className:"h-9 w-full rounded-md border border-slate-300 pr-10 pl-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 hide-native-date-icon"}),e.jsx("span",{role:"button",tabIndex:0,"aria-label":"Open date picker",onClick:()=>n(h),onKeyDown:t=>(t.key==="Enter"||t.key===" ")&&n(h),className:"absolute inset-y-0 right-2 grid place-items-center text-base cursor-pointer select-none",children:"ðŸ“…"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Duration"}),e.jsx("div",{className:"relative mt-1",children:e.jsx("input",{value:R,onChange:t=>_(t.target.value),className:"h-9 w-full rounded-md border border-slate-300 pl-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 1h, 1d"})})]})]}),e.jsxs("div",{className:"grid gap-3 content-start",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"List"}),e.jsx("input",{value:O,onChange:t=>I(t.target.value),className:"mt-1 h-10 rounded-md border border-slate-300 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"List name"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Key Area"}),e.jsx("input",{value:"Don't Forget",readOnly:!0,className:"mt-1 h-10 rounded-md border border-slate-300 px-3 text-sm text-slate-500 bg-slate-50"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Respons."}),e.jsx("input",{value:S,onChange:t=>D(t.target.value),className:"mt-1 h-10 rounded-md border border-slate-300 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Assignee"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Priority"}),e.jsxs("select",{value:k,onChange:t=>w(t.target.value),className:"mt-1 h-10 rounded-md border border-slate-300 px-3 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"low",children:"Low"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Goal"}),e.jsx("input",{value:K,onChange:t=>P(t.target.value),className:"mt-1 h-10 rounded-md border border-slate-300 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Goal"})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[J?e.jsx("div",{className:"text-xs text-slate-600",children:"â€¢ OK saves the task â€¢ Cancel closes without saving â€¢ Dates use your local timezone."}):e.jsx("span",{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"submit",className:"rounded-md bg-blue-600 hover:bg-blue-700 text-white font-semibold flex items-center gap-2 px-4 py-2 text-sm disabled:opacity-50",disabled:i,children:[e.jsx(te,{})," ",i?"Saving...":"OK"]}),e.jsx("button",{type:"button",onClick:a,className:"rounded-md border border-slate-300 px-4 py-2 text-sm text-slate-700 hover:bg-slate-50",disabled:i,children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>H(t=>!t),className:"rounded-md border border-slate-300 px-4 py-2 text-sm text-slate-700 hover:bg-slate-50",disabled:i,children:"Help"})]})]})]}),e.jsx("button",{type:"button",className:"absolute top-2 right-2 p-2 rounded-md text-slate-600 hover:text-slate-800 hover:bg-slate-100",onClick:a,"aria-label":"Close",children:e.jsx(se,{})})]})})}export{ie as default};
