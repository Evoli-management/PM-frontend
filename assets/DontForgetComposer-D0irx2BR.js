const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/keyAreaService-DTC_lA_G.js","assets/index-DJ9WloyM.js","assets/index-CH3sAiQw.css"])))=>i.map(i=>d[i]);
import{e as ee,r as s,j as e,d as te,a as se,_ as ae}from"./index-DJ9WloyM.js";const le={async list(){var l;try{const a=await ee.get("/users/me"),n=(l=a==null?void 0:a.data)==null?void 0:l.user;if(!n)return[];const x=[n.firstName,n.lastName].filter(Boolean).join(" ")||n.email||"Me";return[{id:n.id||n.sub||n.email||"me",name:x,email:n.email||""}]}catch{return[]}}};let u=null;const ne=async()=>{if(u)return u;const l=await ae(()=>import("./keyAreaService-DTC_lA_G.js"),__vite__mapDeps([0,1,2]));return u=(l==null?void 0:l.default)||l,u};function oe({open:l,onClose:a,onAdd:n,defaultList:x=1}){const U=s.useRef(null),m=s.useRef(null),f=s.useRef(null),h=s.useRef(null),b=s.useRef(null),[j,N]=s.useState(""),[y,k]=s.useState(""),[w,S]=s.useState("normal"),[D,E]=s.useState(""),[C,R]=s.useState(""),[p,g]=s.useState(""),[_,K]=s.useState(""),[P,A]=s.useState(""),[F,O]=s.useState(""),[I,T]=s.useState(""),[L,H]=s.useState(""),[V,G]=s.useState(!1),[o,v]=s.useState(!1),[J,z]=s.useState([]),[re,B]=s.useState([]),[c,Q]=s.useState(""),[W,q]=s.useState(!0);if(s.useEffect(()=>{if(!l)return;const t=i=>{i.key==="Escape"&&(a==null||a())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[l,a]),s.useEffect(()=>{l&&(N(""),k(""),S("normal"),E(""),R(""),g(""),K(""),A(""),O(""),T(""),H(""),G(!1),v(!1),Q(""),q(!0),(async()=>{try{const t=await ne(),[i,d]=await Promise.all([t.list({includeTaskCount:!1}),le.list()]);z(i),B(d)}catch{z([]),B([])}})())},[l,x]),!l)return null;const r=t=>{try{t!=null&&t.current&&(t.current.focus(),typeof t.current.showPicker=="function"&&t.current.showPicker())}catch{}},X=async t=>{var d,M;(d=t==null?void 0:t.preventDefault)==null||d.call(t);const i=j.trim();if(i)try{v(!0),await(n==null?void 0:n({name:i,notes:F,start_date:C,end_date:p,dueDate:y,finish_date:L,duration:_,project:I,assignee:D,priority:w,goal:P,...c?{keyAreaId:c}:{},keyAreaName:c?((M=J.find($=>String($.id)===String(c)))==null?void 0:M.title)||"":"Don't Forget"})),a==null||a()}finally{v(!1)}},Y=t=>{R(t),(W||!p)&&g(t)},Z=t=>{g(t),q(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 grid place-items-center",onClick:a,children:e.jsxs("div",{ref:U,className:"relative bg-white border border-slate-300 rounded-xl shadow-2xl w-[95vw] max-w-4xl overflow-hidden",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"bg-white text-slate-900 border-b border-slate-200 py-3 px-4 text-center font-semibold",children:"Add Task"}),e.jsxs("form",{onSubmit:X,className:"p-4 md:p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"sr-only",htmlFor:"task-title",children:"Task name"}),e.jsx("input",{id:"task-title",autoFocus:!0,value:j,onChange:t=>N(t.target.value),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Task name",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"grid gap-3 content-start",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Description"}),e.jsx("input",{value:F,onChange:t=>O(t.target.value),className:"mt-1 h-9 rounded-md border border-slate-300 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Brief description"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Start date"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:"date",ref:m,value:C,onChange:t=>Y(t.target.value),className:"h-9 w-full rounded-md border border-slate-300 pr-10 pl-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 hide-native-date-icon"}),e.jsx("span",{role:"button",tabIndex:0,"aria-label":"Open date picker",onClick:()=>r(m),onKeyDown:t=>(t.key==="Enter"||t.key===" ")&&r(m),className:"absolute inset-y-0 right-2 grid place-items-center text-base cursor-pointer select-none",children:"ðŸ“…"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"End date"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:"date",ref:f,value:p,onChange:t=>Z(t.target.value),className:"h-9 w-full rounded-md border border-slate-300 pr-10 pl-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 hide-native-date-icon"}),e.jsx("span",{role:"button",tabIndex:0,"aria-label":"Open date picker",onClick:()=>r(f),onKeyDown:t=>(t.key==="Enter"||t.key===" ")&&r(f),className:"absolute inset-y-0 right-2 grid place-items-center text-base cursor-pointer select-none",children:"ðŸ“…"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Deadline"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:"date",ref:h,value:y,onChange:t=>k(t.target.value),className:"h-9 w-full rounded-md border border-slate-300 pr-10 pl-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 hide-native-date-icon"}),e.jsx("span",{role:"button",tabIndex:0,"aria-label":"Open date picker",onClick:()=>r(h),onKeyDown:t=>(t.key==="Enter"||t.key===" ")&&r(h),className:"absolute inset-y-0 right-2 grid place-items-center text-base cursor-pointer select-none",children:"ðŸ“…"})]}),e.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"No later than"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Date (finish)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:"date",ref:b,value:L,onChange:t=>H(t.target.value),className:"h-9 w-full rounded-md border border-slate-300 pr-10 pl-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 hide-native-date-icon"}),e.jsx("span",{role:"button",tabIndex:0,"aria-label":"Open date picker",onClick:()=>r(b),onKeyDown:t=>(t.key==="Enter"||t.key===" ")&&r(b),className:"absolute inset-y-0 right-2 grid place-items-center text-base cursor-pointer select-none",children:"ðŸ“…"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Duration"}),e.jsx("div",{className:"relative mt-1",children:e.jsx("input",{value:_,onChange:t=>K(t.target.value),className:"h-9 w-full rounded-md border border-slate-300 pl-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 1h, 1d"})})]})]}),e.jsxs("div",{className:"grid gap-3 content-start",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"List"}),e.jsx("input",{value:I,onChange:t=>T(t.target.value),className:"mt-1 h-10 rounded-md border border-slate-300 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"List name"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Key Area"}),e.jsx("input",{value:"Don't Forget",readOnly:!0,className:"mt-1 h-10 rounded-md border border-slate-300 px-3 text-sm text-slate-500 bg-slate-50"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Respons."}),e.jsx("input",{value:D,onChange:t=>E(t.target.value),className:"mt-1 h-10 rounded-md border border-slate-300 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Assignee"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Priority"}),e.jsxs("select",{value:w,onChange:t=>S(t.target.value),className:"mt-1 h-10 rounded-md border border-slate-300 px-3 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"low",children:"Low"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Goal"}),e.jsx("input",{value:P,onChange:t=>A(t.target.value),className:"mt-1 h-10 rounded-md border border-slate-300 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Goal"})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[V?e.jsx("div",{className:"text-xs text-slate-600",children:"â€¢ OK saves the task â€¢ Cancel closes without saving â€¢ Dates use your local timezone."}):e.jsx("span",{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"submit",className:"rounded-md bg-blue-600 hover:bg-blue-700 text-white font-semibold flex items-center gap-2 px-4 py-2 text-sm disabled:opacity-50",disabled:o,children:[e.jsx(te,{})," ",o?"Saving...":"OK"]}),e.jsx("button",{type:"button",onClick:a,className:"rounded-md border border-slate-300 px-4 py-2 text-sm text-slate-700 hover:bg-slate-50",disabled:o,children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>G(t=>!t),className:"rounded-md border border-slate-300 px-4 py-2 text-sm text-slate-700 hover:bg-slate-50",disabled:o,children:"Help"})]})]})]}),e.jsx("button",{type:"button",className:"absolute top-2 right-2 p-2 rounded-md text-slate-600 hover:text-slate-800 hover:bg-slate-100",onClick:a,"aria-label":"Close",children:e.jsx(se,{})})]})})}export{oe as default};
