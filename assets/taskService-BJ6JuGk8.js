import{e as r}from"./index-CUvhf67F.js";const c=d=>{const e=String(d||"todo").toLowerCase();return e==="open"?"todo":e==="in progress"||e==="in_progress"?"in_progress":e==="done"||e==="completed"||e==="closed"?"completed":e==="blocked"||e==="canceled"?"cancelled":e},u=d=>{const e=String(d||"todo").toLowerCase();return e==="todo"?"open":e==="in_progress"?"in_progress":e==="completed"?"done":e==="cancelled"||e==="canceled"?"blocked":e},x=d=>{const e=String(d||"medium").toLowerCase();return e==="1"||e==="low"?"low":e==="2"||e==="normal"||e==="med"||e==="medium"?"medium":e==="3"||e==="high"?"high":e},f=d=>{const e=String(d||"medium").toLowerCase();return e==="medium"?"normal":e},a="/tasks",_={async list({keyAreaId:d,unassigned:e}={}){var n,i;const t={};d&&(t.keyAreaId=d),e&&(t.unassigned=!0);try{return(await r.get(a,{params:t})).data.map(l=>{const o=l.goal_id??l.goalId??l.goal??null;let p=null;return o&&(typeof o=="object"&&o!==null?p=o.id||o.goal_id||null:p=o),{...l,status:u(l.status),priority:f(l.priority),goal_id:p||null,list_index:typeof l.listIndex<"u"?l.listIndex:typeof l.list_index<"u"?l.list_index:null,listIndex:typeof l.listIndex<"u"?l.listIndex:typeof l.list_index<"u"?l.list_index:null}})}catch(s){const l=(n=s==null?void 0:s.response)==null?void 0:n.status,o=(i=s==null?void 0:s.response)==null?void 0:i.data;if(console.warn("Tasks list failed",{status:l,data:o}),l===500)return[];throw s}},async get(d){const t=(await r.get(`${a}/${d}`)).data,n=t.goal_id??t.goalId??t.goal??null;let i=null;return n&&(typeof n=="object"&&n!==null?i=n.id||n.goal_id||null:i=n),{...t,status:u(t.status),priority:f(t.priority),goal_id:i||null,list_index:typeof t.listIndex<"u"?t.listIndex:typeof t.list_index<"u"?t.list_index:null,listIndex:typeof t.listIndex<"u"?t.listIndex:typeof t.list_index<"u"?t.list_index:null}},async create(d){const e={...d};typeof e.listIndex>"u"&&typeof e.list_index<"u"&&(e.listIndex=e.list_index);const n=(await r.post(a,{...e,status:c(e.status),priority:x(e.priority)})).data,i=n.goal_id??n.goalId??n.goal??null;let s=null;return i&&(typeof i=="object"&&i!==null?s=i.id||i.goal_id||null:s=i),{...n,status:u(n.status),priority:f(n.priority),goal_id:s||null,list_index:typeof n.listIndex<"u"?n.listIndex:typeof n.list_index<"u"?n.list_index:null,listIndex:typeof n.listIndex<"u"?n.listIndex:typeof n.list_index<"u"?n.list_index:null}},async update(d,e){const t={...e};typeof t.listIndex>"u"&&typeof t.list_index<"u"&&(t.listIndex=t.list_index),t.status&&(t.status=c(t.status)),t.priority&&(t.priority=x(t.priority));const i=(await r.put(`${a}/${d}`,t)).data,s=i.goal_id??i.goalId??i.goal??null;let l=null;return s&&(typeof s=="object"&&s!==null?l=s.id||s.goal_id||null:l=s),{...i,status:u(i.status),priority:f(i.priority),goal_id:l||null,list_index:typeof i.listIndex<"u"?i.listIndex:typeof i.list_index<"u"?i.list_index:null,listIndex:typeof i.listIndex<"u"?i.listIndex:typeof i.list_index<"u"?i.list_index:null}},async remove(d){return(await r.delete(`${a}/${d}`)).data}};export{_ as default};
